{% extends 'MovieMovieBundle::layout.html.twig' %}
{% block body %}
    <h1>Mickey's Movie Rater Homepage</h1>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
    <button class="btn btn-success pull-right"><a href="{{ path('movie_new') }}">Add new movie</a></button>
    {% endif %}
    {% if is_granted('ROLE_ADMIN') %}
        Administrator
    {% elseif is_granted('ROLE_USER') %}
        Userb
        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <p>Username: {{ app.user.username }}</p>
        {% endif %}
    {% else %}
        Anonymous
    {% endif %}
    <hr>
    {% if movies %}
        <table class="table table-striped table-bordered" id="movies">
            <thead>
            <tr>
                <th class="text-center">Movie</th>
                <th class="text-center">Director</th>
                <th class="text-center">Actors</th>
                <th class="text-center">Synopsis</th>
                <th class="text-center">Running Time (in minutes)</th>
                <th class="text-center">Rating</th>
                {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <th colspan="2" class="text-center">Actions</th>
                    {% endif %}
            </tr>
            </thead>
            <tbody>
            {% for movie in movies %}
                <tr>
                    <td>
                        <a href="{{ path('movie_show', {'id': movie.id}) }}">{{ movie.title }}</a>
                    </td>
                    <td>
                        {{ movie.director }}
                    </td>
                    <td>
                        {{ movie.actors }}
                    </td>
                    <td>
                        {{ movie.summary }}
                    </td>
                    <td>
                        {{ movie.runningTime }}
                    </td>
                    <td>
                        {{ movie.rating }}
                    </td>
                    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                    <td>

                        <a href="{{ path('movie_edit', {'id': movie.id}) }}" class="btn btn-outline-primary" data-id="{{ movie.id }}">Edit</a>
                    </td>
{#      No delete mentioned in assignment spec                  #}
{#                    <td>#}
{#                        <a href="#" class="btn btn-danger delete-movie" data-id="{{ movie.id }}">Delete</a>#}
{#                    </td>#}
                    {% endif %}

                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No movies to show</p>
    {% endif %}
{% endblock %}

{% block sidebar %}
    <h2>New Releases</h2>
    <div>Check out the movies below which have recently been added to our database!</div>
    <div>Accusamus ad at excepturi illo ipsam laboriosam nemo neque nobis, obcaecati odio quas, quidem quo velit
        voluptas voluptate? Doloremque, esse nemo non odio officiis perferendis quisquam suscipit totam vel voluptas.
    </div>
    <div>Ad aliquam, consequuntur deserunt exercitationem molestias odio optio provident reiciendis veniam voluptatum.
        Aperiam dicta dignissimos eius, enim error eveniet, exercitationem facilis, harum inventore ipsum iure libero
        quisquam repellendus suscipit voluptatum.
    </div>
    <div>Animi culpa error molestiae perferendis quae ratione rerum tempora vitae? Assumenda blanditiis eum excepturi,
        expedita explicabo, harum illum incidunt numquam placeat rerum saepe sint vero vitae voluptas voluptate.
        Officiis, provident!
    </div>
{% endblock %}

{% block javascripts %}
    {% javascripts '@MovieMovieBundle/Resources/js/main.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

